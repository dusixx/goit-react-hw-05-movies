"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[3315,5022],{8029:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var n=r(1413),a=r(5671),c=r(3144),u=r(6274),i=r(9359),o=r(2703),s=(0,i.Z)("cache"),f=function(){function t(){(0,a.Z)(this,t),Object.defineProperty(this,s,{writable:!0,value:{}})}return(0,c.Z)(t,[{key:"set",value:function(t,e){(0,o.setProp)((0,u.Z)(this,s)[s],t,e)}},{key:"get",value:function(t){return(0,o.getProp)((0,u.Z)(this,s)[s],t)}},{key:"data",get:function(){return(0,n.Z)({},(0,u.Z)(this,s)[s])}},{key:"clear",value:function(){(0,u.Z)(this,s)[s]={}}}]),t}()},3315:function(t,e,r){r.r(e),r.d(e,{getAvatar:function(){return h},getCastPreview:function(){return v},getCrewPreview:function(){return p},normalizeCastData:function(){return f},normalizeCrewData:function(){return s}});var n=r(3433),a=r(4942),c=r(1413),u=r(2703),i=new(r(5022).default),o=function(t,e){if(!Array.isArray(t))return[];var r=t.reduce((function(t,r){var n=r.id,u=r[e];return t[n]?t[n][e].push(u):t[n]=(0,c.Z)((0,c.Z)({},r),{},(0,a.Z)({},e,[u])),t}),{});return Object.values(r).map((function(t){return(0,c.Z)((0,c.Z)({},t),{},(0,a.Z)({},e,t[e].join(", ")))}))},s=function(t){return o(t,"job")},f=function(t){return o(t,"character")},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(Array.isArray(null===t||void 0===t?void 0:t.cast)){var r=t.cast,n=r.slice(0,e).map((function(t){var e=t.original_name,r=t.name;return e||r})),a=r.length-n.length,c=a>0?"...other ".concat(a," actor(s)"):"...other actor(s)";return n.length>0?{preview:n.join(", "),remaining:c}:null}},p=function(t){if(Array.isArray(null===t||void 0===t?void 0:t.crew)){var e=t.crew,r=0,a=e.reduce((function(t,e){var a=e.department,c=e.job,i=e.name,o=(0,u.normalizeStr)(c),s=(0,u.normalizeStr)(a);return"director"===o&&"directing"!==s||t[o]&&(r+=1,t[o]=[].concat((0,n.Z)(t[o]),[i])),t}),{director:[],screenplay:[],writer:[],characters:[],story:[]});return r?a:null}},h=function(t,e){return t?/http/i.test(t)?t.replace(/\//,""):i.getImageUrl(t,e):null}},5022:function(t,e,r){r.r(e),r.d(e,{default:function(){return b}});var n=r(9439),a=r(1413),c=r(5861),u=r(5671),i=r(3144),o=r(6274),s=r(9359),f=r(4687),v=r.n(f),p=r(1243),h=r(2703),l=new(r(8029).default),d="https://api.themoviedb.org/3",g="https://image.tmdb.org/t/p",m="https://www.themoviedb.org/movie",w="https://www.imdb.com/title",y="86d04e898c465c8de09e1ea2fc383ab8",k=(0,s.Z)("response"),Z=(0,s.Z)("instance"),b=function(){function t(){if((0,u.Z)(this,t),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),(0,o.Z)(this,Z)[Z])return(0,o.Z)(this,Z)[Z];(0,o.Z)(this,Z)[Z]=this}return(0,i.Z)(t,[{key:"getImageUrl",value:function(t,e){var r=isNaN(parseInt(e))?"original":"w".concat(e);return"".concat(g,"/").concat(r,"/").concat(t)}},{key:"getTmdbUrl",value:function(t){return"".concat(m,"/").concat(t)}},{key:"getImdbUrl",value:function(t){return"".concat(w,"/").concat(t)}},{key:"fetch",value:function(){var t=(0,c.Z)(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.Z.get(e);case 3:return r=t.sent,t.abrupt("return",(0,a.Z)({},(0,o.Z)(this,k)[k]=r));case 7:throw t.prev=7,t.t0=t.catch(0),(0,o.Z)(this,k)[k]=t.t0,t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(d,"/").concat(e,"?api_key=").concat(y,"&").concat(new URLSearchParams((c=r,(0,h.isObj)(c)?Object.entries(c).reduce((function(t,e){var r=(0,n.Z)(e,2),a=r[0],c=r[1];return t[(0,h.camelToSnake)(a)]=c,t}),{}):{}))),t.next=3,this.fetch(a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}var c}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getGenres",value:function(){var t=(0,c.Z)(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,h.isArray)(e)){t.next=2;break}return t.abrupt("return",[]);case 2:if(l.get("genres")){t.next=7;break}return t.next=5,this.get("genre/movie/list");case 5:r=t.sent,l.set("genres",r.data.genres);case 7:return t.abrupt("return",l.get("genres").filter((function(t){var r=t.id;return e.includes(r)})).map((function(t){return t.name})));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getTrendingMovies",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var n,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("trending/movie/".concat((0,h.normalizeStr)(e)),r);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieDetails",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var n,a,c;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=l.get("movie/".concat(e)))){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,this.get("movie/".concat(e),r);case 5:return a=t.sent,c=a.data,l.set("movie/".concat(e),c),t.abrupt("return",c);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieCredits",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var n,a,c;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=l.get("movie/".concat(e,"/credits")))){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,this.get("movie/".concat(e,"/credits"),r);case 5:return a=t.sent,c=a.data,l.set("movie/".concat(e,"/credits"),c),t.abrupt("return",c);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieReviews",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var n,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("movie/".concat(e,"/reviews"),r);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"searchMovies",value:function(){var t=(0,c.Z)(v().mark((function t(e,r){var n,c;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("search/movie",(0,a.Z)({query:e},r));case 2:return n=t.sent,c=n.data,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"cache",get:function(){return l.data}}]),t}()}}]);
//# sourceMappingURL=3315.0e7f6e18.chunk.js.map