{"version":3,"file":"static/js/5415.4367d8bf.chunk.js","mappings":"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","sources":["components/ErrorMessage/ErrorMessage.jsx","components/etc/LoadMoreBtn/LoadMoreBtn.jsx","components/etc/LoadMoreBtn/LoadMoreBtn.styled.jsx","components/etc/OptionButtons/OptionButtons.jsx","components/etc/OptionButtons/OptionButtons.styled.jsx","pages/Home.jsx"],"sourcesContent":["import { LinkButton } from 'styles/shared';\nimport { Caption, Container, Text } from './ErrorMessage.styled';\nimport { IconError } from 'styles/icons';\nimport { shape, string } from 'prop-types';\n\nexport const ErrorMessage = ({ error }) => {\n  console.error(error);\n\n  return (\n    <Container>\n      <IconError size={40} color=\"var(--color-blue)\" />\n      <Caption>Something went wrong</Caption>\n      <Text>{error.code}</Text>\n      <LinkButton to=\"/\" style={{ textTransform: 'capitalize' }}>\n        Go to the homepage\n      </LinkButton>\n      {/* <LinkButton to={-1} style={{ textTransform: 'capitalize' }}>\n        Go back\n      </LinkButton> */}\n    </Container>\n  );\n};\n\nErrorMessage.propType = {\n  error: shape({\n    message: string,\n    code: string,\n  }),\n};\n","import { useEffect, useRef, useState } from 'react';\nimport { Button, Spinner } from './LoadMoreBtn.styled';\nimport { func, bool } from 'prop-types';\n\nconst BTN_TITLE = 'Load more';\n\n//\n// LoadMoreBtn\n//\n\nexport const LoadMoreBtn = ({ onClick, centered = true, ...restProps }) => {\n  const [showLoader, setShowLoader] = useState(false);\n  const btnRef = useRef(null);\n  const btnRect = useRef(null);\n  const observer = useRef(null);\n  const clickCount = useRef(1);\n\n  useEffect(() => {\n    const { current: ref } = btnRef;\n    observer.current = new IntersectionObserver(() => setShowLoader(false));\n    observer.current.observe(ref);\n\n    // фактический размер, чтобы спинер не изменял габариты кнопки\n    // Иначе, надо жестко задать размеры кнопки в стилях\n    btnRect.current = btnRef.current.getBoundingClientRect();\n\n    return () => observer.current.unobserve(ref);\n  }, []);\n\n  const handleClick = e => {\n    setShowLoader(true);\n    clickCount.current += 1;\n    onClick && onClick(clickCount.current, e);\n  };\n\n  const { width, height } = btnRect.current || '';\n  const btnProps = { width, height, ...restProps };\n\n  return (\n    <Button\n      ref={btnRef}\n      onClick={handleClick}\n      centered={centered}\n      isLoading={showLoader}\n      {...btnProps}\n    >\n      {showLoader ? <Spinner size={height * 0.5} /> : BTN_TITLE}\n    </Button>\n  );\n};\n\nLoadMoreBtn.propType = {\n  onClick: func,\n  centered: bool,\n};\n","import styled from '@emotion/styled';\nimport { ButtonSecondary, FlexCentered } from 'styles/shared';\nimport { calcCSSValue } from 'utils';\n\nexport const Button = styled(ButtonSecondary)`\n  ${FlexCentered()};\n\n  margin-left: ${({ centered }) => (centered ? 'auto' : 0)};\n  margin-right: ${({ centered }) => (centered ? 'auto' : 0)};\n\n  width: ${({ width }) => calcCSSValue(width)};\n  height: ${({ height }) => calcCSSValue(height)};\n\n  /*\n    Пока кнопка со спинером - не убираем цвето фона\n    Иначе, спиннер сольется с фоном страницы\n    Можно сдлеать, чтобы цвет спиннера менялся на прозрачном фоне\n  */\n  background-color: ${({ isLoading }) =>\n    isLoading ? 'var(--color-blue)' : 'transparent'};\n`;\n\nexport const Spinner = styled.span`\n  display: inline-block;\n  width: ${({ size }) => calcCSSValue(size)};\n  height: ${({ size }) => calcCSSValue(size)};\n\n  border: 2px solid #fff;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n\n  animation: rotation 0.7s linear infinite;\n  opacity: 0.6;\n\n  @keyframes rotation {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n`;\n","import { useState, useEffect } from 'react';\nimport { string, func, oneOfType, arrayOf } from 'prop-types';\nimport { OptionsList, OptionButton } from './OptionButtons.styled';\nimport { normalizeStr, getList } from 'utils';\n\nexport const OptionButtons = ({ items, value, onClick, ...restProps }) => {\n  const [active, setActive] = useState(value);\n\n  useEffect(() => {\n    setActive(value);\n  }, [value]);\n\n  const handleClick = name => {\n    setActive(name);\n    onClick && onClick(normalizeStr(name));\n  };\n\n  const btns = getList(items);\n  if (!active) setActive(btns[0]);\n\n  return (\n    btns.length > 0 && (\n      <OptionsList {...restProps}>\n        {btns.map(name => (\n          <OptionButton\n            key={name}\n            active={active === name}\n            onClick={() => handleClick(name)}\n          >\n            {name}\n          </OptionButton>\n        ))}\n      </OptionsList>\n    )\n  );\n};\n\nOptionButtons.propType = {\n  items: oneOfType([string, arrayOf(string)]),\n  value: string,\n  onClick: func,\n};\n","import styled from '@emotion/styled';\nimport { ButtonBase, FlexCentered, TransitionBase } from 'styles/shared';\n\nconst COLOR_ACTIVE = 'white';\nconst COLOR_INACTIVE = 'var(--color-text)';\nconst COLOR_ACTIVE_BG = 'var(--color-orange)';\nconst COLOR_INACTIVE_FOCUSED_BG = 'lightgray';\n\nexport const OptionsList = styled.div`\n  ${FlexCentered('gap: 8px')};\n`;\n\nexport const OptionButton = styled(ButtonBase)`\n  position: relative;\n  padding: 5px 12px 5px 12px;\n\n  font-family: inherit;\n  font-size: 12px;\n  letter-spacing: -0.3px;\n  text-transform: capitalize;\n\n  @media screen and (min-width: 320px) {\n    font-size: inherit;\n  }\n\n  border-radius: calc(var(--border-radius) * 0.8);\n  ${TransitionBase('color background-color')};\n\n  color: ${({ active }) => (active ? COLOR_ACTIVE : COLOR_INACTIVE)};\n\n  background-color: ${({ active }) =>\n    active ? COLOR_ACTIVE_BG : 'transparent'};\n\n  &:focus-visible,\n  &:hover {\n    background-color: ${({ active }) => !active && COLOR_INACTIVE_FOCUSED_BG};\n  }\n`;\n","import { useEffect, useState, useRef } from 'react';\nimport MovieGallery from 'components/MovieGallery';\nimport { PageTitle } from 'styles/shared';\nimport { OptionButtons } from 'components/etc/OptionButtons/OptionButtons';\nimport { LoadMoreBtn } from 'components/etc/LoadMoreBtn/LoadMoreBtn';\nimport { ErrorMessage } from 'components/ErrorMessage/ErrorMessage';\nimport { SubHeader } from 'components/Subheader/Subheader';\nimport TmdbService from 'services/tmdb/tmdbSrv';\n\nconst srv = new TmdbService();\nconst PAGE_TITLE = `Trends`;\nconst DEF_OPTION_VALUE = 'day';\nconst OPTION_ITEMS = 'day week';\n\n//\n// Home\n//\n\nconst Home = ({ loader }) => {\n  const [active, setActive] = useState(DEF_OPTION_VALUE);\n  const [error, setError] = useState(null);\n  const [trends, setTrends] = useState([]);\n  const [wasLoaded, setWasLoaded] = useState(false);\n  const totalPages = useRef(1);\n  const page = useRef(1);\n\n  useEffect(() => {\n    srv\n      .getTrendingMovies(active)\n      .then(data => {\n        setTrends(data.results);\n        totalPages.current = data.total_pages;\n      })\n      .catch(err => {\n        setError(err);\n        console.log(err);\n      });\n  }, [active]);\n\n  const handleLoadMoreClick = clickCount => {\n    page.current = clickCount;\n    srv\n      .getTrendingMovies(active, { page: page.current })\n      .then(({ results }) => {\n        setTrends(cur => [...cur, ...results]);\n      })\n      .catch(setError);\n  };\n\n  const showLoadMoreBtn =\n    wasLoaded && totalPages.current > 0 && page.current < totalPages.current;\n\n  return (\n    <>\n      {error && <ErrorMessage error={error} />}\n      {!error && trends?.length > 0 && (\n        <>\n          <SubHeader>\n            <OptionButtons\n              items={OPTION_ITEMS}\n              onClick={setActive}\n              value={active}\n            />\n          </SubHeader>\n\n          <PageTitle style={{ marginBottom: 35 }}>{PAGE_TITLE}</PageTitle>\n\n          <MovieGallery\n            data={trends}\n            loader={loader}\n            onLoad={() => setWasLoaded(true)}\n          />\n\n          {showLoadMoreBtn && (\n            <LoadMoreBtn\n              onClick={handleLoadMoreClick}\n              style={{ marginTop: 40 }}\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n"],"names":["ErrorMessage","error","console","Container","IconError","size","color","Caption","Text","code","LinkButton","to","style","textTransform","propType","shape","message","string","LoadMoreBtn","onClick","centered","restProps","useState","showLoader","setShowLoader","btnRef","useRef","btnRect","observer","clickCount","useEffect","ref","current","IntersectionObserver","observe","getBoundingClientRect","unobserve","width","height","btnProps","Button","e","isLoading","Spinner","func","bool","styled","ButtonSecondary","FlexCentered","calcCSSValue","OptionButtons","items","value","active","setActive","handleClick","name","normalizeStr","btns","getList","length","OptionsList","map","OptionButton","oneOfType","arrayOf","ButtonBase","TransitionBase","srv","TmdbService","loader","setError","trends","setTrends","wasLoaded","setWasLoaded","totalPages","page","getTrendingMovies","then","data","results","total_pages","catch","err","log","showLoadMoreBtn","SubHeader","PageTitle","marginBottom","onLoad","cur","marginTop"],"sourceRoot":""}