"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[3315,5022],{8029:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var n=r(1413),a=r(5671),u=r(3144),c=r(6274),i=r(9359),o=r(2703),s=(0,i.Z)("cache"),f=function(){function t(){(0,a.Z)(this,t),Object.defineProperty(this,s,{writable:!0,value:{}})}return(0,u.Z)(t,[{key:"set",value:function(t,e){(0,o.setProp)((0,c.Z)(this,s)[s],t,e)}},{key:"get",value:function(t){return(0,o.getProp)((0,c.Z)(this,s)[s],t)}},{key:"data",get:function(){return(0,n.Z)({},(0,c.Z)(this,s)[s])}},{key:"clear",value:function(){(0,c.Z)(this,s)[s]={}}}]),t}()},3315:function(t,e,r){r.r(e),r.d(e,{getAvatar:function(){return l},getCastPreview:function(){return v},getCrewPreview:function(){return p},normalizeCastData:function(){return f},normalizeCrewData:function(){return s}});var n=r(3433),a=r(4942),u=r(1413),c=r(2703),i=new(r(5022).default),o=function(t,e){if(!Array.isArray(t))return[];var r=t.reduce((function(t,r){var n=r.id,c=r[e];return t[n]?t[n][e].push(c):t[n]=(0,u.Z)((0,u.Z)({},r),{},(0,a.Z)({},e,[c])),t}),{});return Object.values(r).map((function(t){return(0,u.Z)((0,u.Z)({},t),{},(0,a.Z)({},e,t[e].join(", ")))}))},s=function(t){return o(t,"job")},f=function(t){return o(t,"character")},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(Array.isArray(null===t||void 0===t?void 0:t.cast)){var r=t.cast,n=r.slice(0,e).map((function(t){var e=t.original_name,r=t.name;return e||r})),a=r.length-n.length,u=a>0?"...other ".concat(a," actor(s)"):"...other actor(s)";return n.length>0?{preview:n.join(", "),remaining:u}:null}},p=function(t){if(Array.isArray(null===t||void 0===t?void 0:t.crew)){var e=t.crew,r=0,a=e.reduce((function(t,e){var a=e.department,u=e.job,i=e.name,o=(0,c.normalizeStr)(u),s=(0,c.normalizeStr)(a);return"director"===o&&"directing"!==s||t[o]&&(r+=1,t[o]=[].concat((0,n.Z)(t[o]),[i])),t}),{director:[],screenplay:[],writer:[],characters:[],story:[]});return r?a:null}},l=function(t,e){return t?/http/i.test(t)?t.replace(/\//,""):i.getImageUrl(t,e):null}},5022:function(t,e,r){r.r(e),r.d(e,{default:function(){return x}});var n,a=r(9439),u=r(1413),c=r(5861),i=r(5671),o=r(3144),s=r(6274),f=r(9359),v=r(4687),p=r.n(v),l=r(1243),h=r(2703),d=new(r(8029).default),g="https://api.themoviedb.org/3",m="https://image.tmdb.org/t/p",w="https://www.themoviedb.org/movie",y="https://www.imdb.com/title",b="86d04e898c465c8de09e1ea2fc383ab8",k=(0,f.Z)("response"),Z=(0,f.Z)("instance"),x=function(){function t(){if((0,i.Z)(this,t),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),(0,s.Z)(this,Z)[Z])return(0,s.Z)(this,Z)[Z];(0,s.Z)(this,Z)[Z]=this}return(0,o.Z)(t,[{key:"getImageUrl",value:function(t,e){var r=isNaN(parseInt(e))?"original":"w".concat(e);return"".concat(m,"/").concat(r,"/").concat(t)}},{key:"getTmdbUrl",value:function(t){return"".concat(w,"/").concat(t)}},{key:"getImdbUrl",value:function(t){return"".concat(y,"/").concat(t)}},{key:"fetch",value:function(){var t=(0,c.Z)(p().mark((function t(e){var r,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,r=n.signal,t.prev=2,t.next=5,l.Z.get(e,{signal:r});case 5:return a=t.sent,t.abrupt("return",(0,u.Z)({},(0,s.Z)(this,k)[k]=a));case 9:throw t.prev=9,t.t0=t.catch(2),(0,s.Z)(this,k)[k]=t.t0,t.t0;case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(g,"/").concat(e,"?api_key=").concat(b,"&").concat(new URLSearchParams((u=r,(0,h.isObj)(u)?Object.entries(u).reduce((function(t,e){var r=(0,a.Z)(e,2),n=r[0],u=r[1];return t[(0,h.camelToSnake)(n)]=u,t}),{}):{}))),t.next=3,this.fetch(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}var u}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getGenres",value:function(){var t=(0,c.Z)(p().mark((function t(e){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,h.isArray)(e)){t.next=2;break}return t.abrupt("return",[]);case 2:if(d.get("genres")){t.next=7;break}return t.next=5,this.get("genre/movie/list");case 5:r=t.sent,d.set("genres",r.data.genres);case 7:return t.abrupt("return",d.get("genres").filter((function(t){var r=t.id;return e.includes(r)})).map((function(t){return t.name})));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getTrendingMovies",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("trending/movie/".concat((0,h.normalizeStr)(e)),r);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieDetails",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n,a,u;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=d.get("movie/".concat(e)))){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,this.get("movie/".concat(e),r);case 5:return a=t.sent,u=a.data,d.set("movie/".concat(e),u),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieCredits",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n,a,u;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=d.get("movie/".concat(e,"/credits")))){t.next=3;break}return t.abrupt("return",n);case 3:return t.next=5,this.get("movie/".concat(e,"/credits"),r);case 5:return a=t.sent,u=a.data,d.set("movie/".concat(e,"/credits"),u),t.abrupt("return",u);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getMovieReviews",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("movie/".concat(e,"/reviews"),r);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"searchMovies",value:function(){var t=(0,c.Z)(p().mark((function t(e,r){var n,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get("search/movie",(0,u.Z)({query:e},r));case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"cache",get:function(){return d.data}},{key:"abort",value:function(){n.abort()}}]),t}()}}]);
//# sourceMappingURL=3315.528830e4.chunk.js.map